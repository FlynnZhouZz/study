# HTML 字符集

## 什么是 HTML 字符集？

HTML 字符集（Character Encoding）决定网页如何把 二进制数据解释成文字。

例如：

-   UTF-8
-   ISO-8859-1
-   GBK（老中文编码）
-   Shift_JIS（旧日文编码）

现代网页 全部使用 UTF-8，因为它支持所有语言。

## 常见的字符集/编码

### ASCII（美国信息交换标准代码）

-   范围： 仅包含 128 个字符（0-127）。
-   包含内容： 英文字母（大小写）、数字、标点符号以及一些控制字符（如换行、回车）。
-   局限性： 完全无法表示其他语言的文字，如中文、日文、法文等。

### ISO-8859-1 (Latin-1)

-   范围： 扩展自 ASCII，包含 256 个字符（0-255）。
-   包含内容： 在 ASCII 的基础上，增加了西欧语言的字符，如带重音的字母（é, ñ, ü）等。
-   在 HTML 4.01 中，它是默认的字符集。
-   局限性： 仍然无法表示亚洲字符。

### Unicode (万国码)

这是一个字符集，旨在包含世界上所有的字符系统。它为每个字符分配一个唯一的编号（码点），与平台、程序、语言无关。

-   例如：汉字“你”的 Unicode 码点是 U+4F60。

但是，Unicode 本身不规定如何存储。这时就需要具体的编码方案。

### UTF-8 (Unicode Transformation Format - 8-bit)

这是 Unicode 的一种实现方式（编码方案），也是目前 Web 标准的绝对首选。

特点：

-   可变长度： 使用 1 到 4 个字节来表示一个字符。
-   兼容 ASCII： 所有 ASCII 字符（0-127）在 UTF-8 中保持原样，只用 1 个字节。这使得纯英文文档在 UTF-8 下非常高效。
-   涵盖所有字符： 可以表示 Unicode 标准中的任何字符，包括大量中文、日文、韩文字符以及各种表情符号（Emoji）。
-   高效且通用： 是解决字符集问题的最佳方案。

## HTML 设置字符集的标准写法

HTML5：

```html
<head>
    <!-- 如果不写，有些中文页面会出现 乱码。 -->
    <meta charset="UTF-8" />
</head>
```

HTML4：

```html
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
</head>
```

charset 必须放在 `<head>` 最前面

浏览器是 自上而下解析的，如果 charset 写下面，浏览器在解析前半段时可能已经用错编码方式 → 出现乱码。

## 浏览器如何决定编码？

浏览器采用以下优先级（从高到低）：

1. HTTP Header

```pgsql
Content-Type: text/html; charset=UTF-8
```

2. HTML `<meta charset>`
3. 浏览器的默认编码设置
4. 浏览器猜测（可能出错）

## 常见编码对比

| 编码              | 语言             | 描述                   |
| ----------------- | ---------------- | ---------------------- |
| **UTF-8（推荐）** | 全语言           | 国际标准，网页默认编码 |
| GB2312            | 简体中文         | 较老                   |
| GBK               | 简体中文         | GB2312 扩展版          |
| BIG5              | 繁体中文（台湾） |                        |
| Shift_JIS         | 日文             | 老编码，少用           |
| ISO-8859-1        | 西文             | 曾是 HTML4 默认编码    |

> 现代网页 不要用 GBK / BIG5 / Shift_JIS，否则国际化和表情符号会乱码。

## 最佳实践（必须牢记）

-   永远使用 UTF-8
-   服务器也要返回 UTF-8
-   文件本身保存为 UTF-8（编辑器设置）
-   charset 写在 `<head>` 最上面

## 如何检查网页编码？

Chrome → 右键检查 → Network → 点击 HTML → Headers

找到：

```pgsql
Content-Type: text/html; charset=utf-8
```

如果不是 UTF-8，容易出现乱码。

## 页面乱码问题排查

- HTML 文件本身的保存编码 是否为 UTF-8？
- HTML 文档的 `<meta charset>` 声明 是否正确且位于 `<head>` 顶部？
- 服务器的 HTTP 响应头 中是否发送了正确的 charset 信息？（可以通过浏览器开发者工具的 “Network” 面板查看）

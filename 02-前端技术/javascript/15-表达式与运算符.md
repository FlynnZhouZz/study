# è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦

## è¡¨è¾¾å¼åŸºç¡€

è¡¨è¾¾å¼æ˜¯äº§ç”Ÿå€¼çš„ä»£ç ç‰‡æ®µã€‚ä»»ä½•å€¼æœ¬èº«éƒ½æ˜¯è¡¨è¾¾å¼ã€‚

```js
// åŸºæœ¬è¡¨è¾¾å¼
42                         // æ•°å­—å­—é¢é‡
"hello"                    // å­—ç¬¦ä¸²å­—é¢é‡
true                       // å¸ƒå°”å­—é¢é‡
null                       // nullå­—é¢é‡
undefined                  // undefined
{x: 1, y: 2}              // å¯¹è±¡å­—é¢é‡
[1, 2, 3]                 // æ•°ç»„å­—é¢é‡

// æ ‡è¯†ç¬¦è¡¨è¾¾å¼
x                          // å˜é‡å¼•ç”¨
Math.PI                   // å±æ€§è®¿é—®
console.log              // å‡½æ•°å¼•ç”¨

// å¤æ‚è¡¨è¾¾å¼
x + y                     // ç®—æœ¯è¡¨è¾¾å¼
x > y                     // æ¯”è¾ƒè¡¨è¾¾å¼
x && y                    // é€»è¾‘è¡¨è¾¾å¼
x = 5                     // èµ‹å€¼è¡¨è¾¾å¼
x++                       // é€’å¢è¡¨è¾¾å¼
typeof x                  // typeofè¡¨è¾¾å¼
```

## è¿ç®—ç¬¦ä¼˜å…ˆçº§ä¸ç»“åˆæ€§

```js
// ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼ˆå®Œæ•´åˆ—è¡¨ï¼‰
// 20: æˆå‘˜è®¿é—® . []ï¼Œå¸¦å‚æ•°åˆ—è¡¨çš„è°ƒç”¨ ()ï¼Œnewï¼ˆå¸¦å‚æ•°ï¼‰
// 19: newï¼ˆæ— å‚æ•°ï¼‰
// 18: åç½®é€’å¢/é€’å‡ x++ x--
// 17: é€»è¾‘é !ï¼ŒæŒ‰ä½é ~ï¼Œä¸€å…ƒåŠ  +ï¼Œä¸€å…ƒå‡ -ï¼Œ
//     å‰ç½®é€’å¢/é€’å‡ ++x --xï¼Œtypeofï¼Œvoidï¼Œdeleteï¼Œawait
// 16: å¹‚ **
// 15: ä¹˜æ³• *ï¼Œé™¤æ³• /ï¼Œå–ä½™ %
// 14: åŠ æ³• +ï¼Œå‡æ³• -
// 13: æŒ‰ä½å·¦ç§» <<ï¼ŒæŒ‰ä½å³ç§» >>ï¼Œæ— ç¬¦å·å³ç§» >>>
// 12: å…³ç³» < <= > >= in instanceof
// 11: ç›¸ç­‰ == != === !==
// 10: æŒ‰ä½ä¸ &
// 9:  æŒ‰ä½å¼‚æˆ– ^
// 8:  æŒ‰ä½æˆ– |
// 7:  é€»è¾‘ä¸ &&
// 6:  é€»è¾‘æˆ– ||
// 5:  ç©ºå€¼åˆå¹¶ ??
// 4:  æ¡ä»¶ï¼ˆä¸‰å…ƒï¼‰ ?:
// 3:  èµ‹å€¼ = += -= *= /= %= **= <<= >>= >>>= &= ^= |= &&= ||= ??=
// 2:  é€—å· ,

// ç¤ºä¾‹ï¼šä¼˜å…ˆçº§å½±å“ç»“æœ
let x = 1 + 2 * 3; // 7ï¼Œä¸æ˜¯9ï¼ˆä¹˜æ³•ä¼˜å…ˆï¼‰
let y = (1 + 2) * 3; // 9

// ç»“åˆæ€§
// å·¦ç»“åˆï¼šå¤§éƒ¨åˆ†è¿ç®—ç¬¦ï¼ˆä»å·¦åˆ°å³è®¡ç®—ï¼‰
let a = 1,
    b = 2,
    c = 3;
let result = a + b + c; // (a + b) + c = 6

// å³ç»“åˆï¼šèµ‹å€¼ã€å¹‚ã€ä¸‰å…ƒã€ä¸€å…ƒè¿ç®—ç¬¦
let d = (e = f = 5); // d = (e = (f = 5))
let g = 2 ** (3 ** 2); // 2 ** (3 ** 2) = 512ï¼Œä¸æ˜¯64
```

## ç®—æœ¯è¿ç®—ç¬¦

### 1. åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦

```js
// åŠ æ³• +
console.log(1 + 2); // 3
console.log("a" + "b"); // 'ab'ï¼ˆå­—ç¬¦ä¸²è¿æ¥ï¼‰
console.log(1 + "2"); // '12'ï¼ˆç±»å‹è½¬æ¢ï¼‰
console.log("1" + 2); // '12'

// å‡æ³• -
console.log(5 - 3); // 2
console.log("5" - 3); // 2ï¼ˆç±»å‹è½¬æ¢ï¼‰
console.log("a" - 1); // NaN

// ä¹˜æ³• *
console.log(3 * 4); // 12
console.log("3" * 4); // 12
console.log(Infinity * 0); // NaN
console.log(Infinity * 2); // Infinity

// é™¤æ³• /
console.log(10 / 2); // 5
console.log(10 / 0); // Infinity
console.log(0 / 0); // NaN
console.log(-10 / 0); // -Infinity

// å–ä½™ %
console.log(10 % 3); // 1
console.log(10 % -3); // 1ï¼ˆç¬¦å·ä¸è¢«é™¤æ•°ç›¸åŒï¼‰
console.log(-10 % 3); // -1
console.log(10.5 % 3); // 1.5

// å¹‚ **ï¼ˆES2016+ï¼‰
console.log(2 ** 3); // 8
console.log(4 ** 0.5); // 2
console.log(2 ** -2); // 0.25
console.log((-2) ** 3); // -8ï¼ˆæ³¨æ„æ‹¬å·ï¼‰
```

### 2. é€’å¢/é€’å‡è¿ç®—ç¬¦

```js
let x = 5;

// åç½®é€’å¢
let y = x++; // y = 5, x = 6
console.log(y, x); // 5 6

// å‰ç½®é€’å¢
let z = ++x; // x = 7, z = 7
console.log(z, x); // 7 7

// åç½®é€’å‡
let a = x--; // a = 7, x = 6
console.log(a, x); // 7 6

// å‰ç½®é€’å‡
let b = --x; // x = 5, b = 5
console.log(b, x); // 5 5

// æµ®ç‚¹æ•°è¿ç®—
let f = 5.7;
console.log(++f); // 6.7

// å­—ç¬¦ä¸²è¿ç®—ï¼ˆä¸æ¨èï¼‰
let s = "5";
console.log(++s); // 6ï¼ˆè½¬æ¢ä¸ºæ•°å­—ï¼‰
console.log(s + 1); // '61'ï¼ˆå­—ç¬¦ä¸²è¿æ¥ï¼‰

// å¸ƒå°”å€¼è¿ç®—
let bool = true;
console.log(++bool); // 2ï¼ˆtrueè½¬æ¢ä¸º1ï¼‰
```

### 3. ä¸€å…ƒè¿ç®—ç¬¦

```js
// ä¸€å…ƒåŠ  +ï¼ˆè½¬æ¢ä¸ºæ•°å­—ï¼‰
console.log(+'42');       // 42
console.log(+true);       // 1
console.log(+false);      // 0
console.log(+null);       // 0
console.log(+undefined);  // NaN
console.log(+'hello');    // NaN

// ä¸€å…ƒå‡ -ï¼ˆå–åï¼‰
console.log(-42);         // -42
console.log(-'42');       // -42
console.log(-true);       // -1

// æ³¨æ„ä¼˜å…ˆçº§
let x = 3;
let y = -x ** 2;          // -9ï¼ˆç›¸å½“äº -(x**2)ï¼‰
let z = (-x) ** 2;        // 9
```

## æ¯”è¾ƒè¿ç®—ç¬¦

### 1. å…³ç³»è¿ç®—ç¬¦

```js
// å°äº <ï¼Œå¤§äº >ï¼Œå°äºç­‰äº <=ï¼Œå¤§äºç­‰äº >=
console.log(5 > 3); // true
console.log("5" > 3); // trueï¼ˆç±»å‹è½¬æ¢ï¼‰
console.log("10" > "2"); // falseï¼ˆå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œ'1' < '2'ï¼‰
console.log("b" > "a"); // trueï¼ˆå­—æ¯é¡ºåºï¼‰
console.log("B" > "a"); // falseï¼ˆå¤§å†™å­—æ¯ç ç‚¹å°ï¼‰

// å­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆUnicodeç ç‚¹ï¼‰
console.log("ğŸ" > "ğŸŒ"); // trueï¼ˆğŸç ç‚¹ï¼š127822ï¼ŒğŸŒç ç‚¹ï¼š127820ï¼‰
console.log("2" > "12"); // trueï¼ˆ'2'.charCodeAt(0) > '1'.charCodeAt(0)ï¼‰

// ä¸NaNæ¯”è¾ƒï¼ˆæ€»æ˜¯falseï¼‰
console.log(NaN < 5); // false
console.log(NaN > 5); // false
console.log(NaN <= NaN); // false
```

### 2. ç›¸ç­‰è¿ç®—ç¬¦

```js
// æ¾æ•£ç›¸ç­‰ ==ï¼ˆå…è®¸ç±»å‹è½¬æ¢ï¼‰
console.log(5 == "5"); // trueï¼ˆå­—ç¬¦ä¸²è½¬æ•°å­—ï¼‰
console.log(true == 1); // trueï¼ˆå¸ƒå°”è½¬æ•°å­—ï¼‰
console.log(false == 0); // true
console.log(null == undefined); // trueï¼ˆç‰¹æ®Šæƒ…å†µï¼‰
console.log(null == 0); // falseï¼ˆnullåªä¸undefinedç›¸ç­‰ï¼‰
console.log(NaN == NaN); // falseï¼ˆNaNä¸ä»»ä½•å€¼éƒ½ä¸ç­‰ï¼‰

// ä¸¥æ ¼ç›¸ç­‰ ===ï¼ˆä¸å…è®¸ç±»å‹è½¬æ¢ï¼‰
console.log(5 === "5"); // false
console.log(true === 1); // false
console.log(null === undefined); // false
console.log(NaN === NaN); // false

// ä¸ç›¸ç­‰ != å’Œ !==
console.log(5 != "5"); // falseï¼ˆè½¬æ¢åç›¸ç­‰ï¼‰
console.log(5 !== "5"); // trueï¼ˆç±»å‹ä¸åŒï¼‰

// ç‰¹æ®Šæƒ…å†µ
console.log([] == ![]); // trueï¼ˆ![] â†’ false â†’ 0ï¼Œ[] â†’ '' â†’ 0ï¼‰
console.log({} == !{}); // falseï¼ˆ!{} â†’ false â†’ 0ï¼Œ{} â†’ '[object Object]' â†’ NaNï¼‰
```

## é€»è¾‘è¿ç®—ç¬¦

### 1. åŸºæœ¬é€»è¾‘è¿ç®—ç¬¦

```js
// é€»è¾‘ä¸ &&
console.log(true && true); // true
console.log(true && false); // false
console.log(5 && 3); // 3ï¼ˆè¿”å›æœ€åä¸€ä¸ªçœŸå€¼ï¼‰
console.log(0 && 3); // 0ï¼ˆçŸ­è·¯ï¼šè¿”å›ç¬¬ä¸€ä¸ªå‡å€¼ï¼‰

// é€»è¾‘æˆ– ||
console.log(true || false); // true
console.log(false || false); // false
console.log(5 || 3); // 5ï¼ˆçŸ­è·¯ï¼šè¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼ï¼‰
console.log(0 || 3); // 3

// é€»è¾‘é !
console.log(!true); // false
console.log(!false); // true
console.log(!0); // trueï¼ˆå‡å€¼è½¬trueï¼‰
console.log(!5); // falseï¼ˆçœŸå€¼è½¬falseï¼‰
console.log(!!"hello"); // trueï¼ˆåŒé‡å¦å®šè½¬ä¸ºå¸ƒå°”å€¼ï¼‰
```

### 2. çŸ­è·¯æ±‚å€¼åº”ç”¨

```js
// é»˜è®¤å€¼è®¾ç½®
function greet(name) {
    name = name || "è®¿å®¢"; // å¦‚æœnameä¸ºå‡å€¼ï¼Œä½¿ç”¨'è®¿å®¢'
    console.log(`ä½ å¥½, ${name}`);
}

greet("å¼ ä¸‰"); // ä½ å¥½, å¼ ä¸‰
greet(""); // ä½ å¥½, è®¿å®¢
greet(0); // ä½ å¥½, è®¿å®¢

// ES2020+ æ›´å¥½çš„æ–¹å¼ï¼šç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ ??
function greet2(name) {
    name = name ?? "è®¿å®¢"; // åªåœ¨nullæˆ–undefinedæ—¶ä½¿ç”¨é»˜è®¤å€¼
    console.log(`ä½ å¥½, ${name}`);
}

greet2(""); // ä½ å¥½, ''
greet2(0); // ä½ å¥½, 0
greet2(null); // ä½ å¥½, è®¿å®¢

// æ¡ä»¶æ‰§è¡Œ
const config = { debug: true };
config.debug && console.log("è°ƒè¯•æ¨¡å¼å¼€å¯");

// å±æ€§è®¿é—®ä¿æŠ¤
const user = null;
const name = user && user.name; // ä¸ä¼šæŠ¥é”™ï¼Œè¿”å›null
console.log(name); // null

// ES2020+ å¯é€‰é“¾
const name2 = user?.name; // æ›´ç®€æ´ï¼Œè¿”å›undefined
```

### 3. é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦ï¼ˆES2021+ï¼‰

```js
let x = 0,
    y = 5;

// é€»è¾‘æˆ–èµ‹å€¼ ||=
x ||= 10; // x = x || 10 â†’ x = 0 || 10 â†’ x = 10
y ||= 10; // y = 5 || 10 â†’ y = 5

console.log(x, y); // 10 5

// é€»è¾‘ä¸èµ‹å€¼ &&=
let a = 5,
    b = 0;
a &&= 10; // a = 5 && 10 â†’ a = 10
b &&= 10; // b = 0 && 10 â†’ b = 0

console.log(a, b); // 10 0

// ç©ºå€¼åˆå¹¶èµ‹å€¼ ??=
let c = null,
    d = 0;
c ??= 10; // c = null ?? 10 â†’ c = 10
d ??= 10; // d = 0 ?? 10 â†’ d = 0

console.log(c, d); // 10 0
```

## ä½è¿ç®—ç¬¦

### 1. åŸºæœ¬ä½è¿ç®—

```js
// æŒ‰ä½ä¸ &
console.log(5 & 3); // 1ï¼ˆ0101 & 0011 = 0001ï¼‰
console.log(-5 & -3); // -7ï¼ˆè´Ÿæ•°ä»¥è¡¥ç è¡¨ç¤ºï¼‰

// æŒ‰ä½æˆ– |
console.log(5 | 3); // 7ï¼ˆ0101 | 0011 = 0111ï¼‰
console.log(5 | 0); // 5

// æŒ‰ä½å¼‚æˆ– ^
console.log(5 ^ 3); // 6ï¼ˆ0101 ^ 0011 = 0110ï¼‰
console.log(5 ^ 5); // 0ï¼ˆç›¸åŒä¸º0ï¼‰

// æŒ‰ä½é ~
console.log(~5); // -6ï¼ˆ~0000000000000101 = 1111111111111010ï¼‰
console.log(~0); // -1

// å·¦ç§» <<
console.log(5 << 1); // 10ï¼ˆ0101 << 1 = 1010ï¼‰
console.log(-5 << 1); // -10

// å³ç§» >>
console.log(5 >> 1); // 2ï¼ˆ0101 >> 1 = 0010ï¼‰
console.log(-5 >> 1); // -3ï¼ˆä¿æŒç¬¦å·ï¼‰

// æ— ç¬¦å·å³ç§» >>>
console.log(5 >>> 1); // 2
console.log(-5 >>> 1); // 2147483645ï¼ˆä¸ä¿æŒç¬¦å·ï¼‰
```

### 2. ä½è¿ç®—åº”ç”¨

```js
// 1. å¿«é€Ÿä¹˜é™¤2çš„å¹‚æ¬¡
let num = 16;
console.log(num << 2); // 64ï¼ˆ16 * 4ï¼‰
console.log(num >> 2); // 4ï¼ˆ16 / 4ï¼‰

// 2. æ£€æŸ¥å¥‡å¶æ€§
function isEven(n) {
    return (n & 1) === 0;
}
console.log(isEven(4)); // true
console.log(isEven(5)); // false

// 3. äº¤æ¢ä¸¤ä¸ªæ•°ï¼ˆä¸ä½¿ç”¨ä¸´æ—¶å˜é‡ï¼‰
let a = 5,
    b = 10;
a = a ^ b; // a = 15 (0101 ^ 1010 = 1111)
b = a ^ b; // b = 5  (1111 ^ 1010 = 0101)
a = a ^ b; // a = 10 (1111 ^ 0101 = 1010)
console.log(a, b); // 10 5

// 4. æƒé™ç³»ç»Ÿ
const PERMISSIONS = {
    READ: 0b001, // 1
    WRITE: 0b010, // 2
    DELETE: 0b100, // 4
};

let userPermissions = 0;

// æ·»åŠ æƒé™
userPermissions |= PERMISSIONS.READ;
userPermissions |= PERMISSIONS.WRITE;

// æ£€æŸ¥æƒé™
function hasPermission(permissions, permission) {
    return (permissions & permission) === permission;
}

console.log(hasPermission(userPermissions, PERMISSIONS.READ)); // true
console.log(hasPermission(userPermissions, PERMISSIONS.DELETE)); // false

// ç§»é™¤æƒé™
userPermissions &= ~PERMISSIONS.WRITE;
console.log(hasPermission(userPermissions, PERMISSIONS.WRITE)); // false
```

## èµ‹å€¼è¿ç®—ç¬¦

### 1. åŸºæœ¬èµ‹å€¼è¿ç®—ç¬¦

```js
// ç®€å•èµ‹å€¼ =
let x = 10;
let y = x; // y = 10

// é“¾å¼èµ‹å€¼
let a = (b = c = 5); // å³ç»“åˆï¼ša = (b = (c = 5))

// å¤åˆèµ‹å€¼è¿ç®—ç¬¦
let num = 10;

num += 5; // num = num + 5 â†’ 15
num -= 3; // num = num - 3 â†’ 12
num *= 2; // num = num * 2 â†’ 24
num /= 4; // num = num / 4 â†’ 6
num %= 4; // num = num % 4 â†’ 2
num **= 3; // num = num ** 3 â†’ 8

// ä½è¿ç®—å¤åˆèµ‹å€¼
let bits = 5;
bits &= 3; // bits = bits & 3 â†’ 1
bits |= 8; // bits = bits | 8 â†’ 9
bits ^= 4; // bits = bits ^ 4 â†’ 13
bits <<= 1; // bits = bits << 1 â†’ 26
bits >>= 2; // bits = bits >> 2 â†’ 6
bits >>>= 1; // bits = bits >>> 1 â†’ 3
```

### 2. è§£æ„èµ‹å€¼ï¼ˆES6+ï¼‰

```js
// æ•°ç»„è§£æ„
let [first, second, third] = [1, 2, 3];
console.log(first, second, third); // 1 2 3

// å¯¹è±¡è§£æ„
let { name, age } = { name: "å¼ ä¸‰", age: 25 };
console.log(name, age); // å¼ ä¸‰ 25

// é»˜è®¤å€¼
let [a = 1, b = 2] = [5];
console.log(a, b); // 5 2

let { x = 0, y = 0 } = { x: 10 };
console.log(x, y); // 10 0

// å‰©ä½™å…ƒç´ 
let [head, ...tail] = [1, 2, 3, 4];
console.log(head, tail); // 1 [2, 3, 4]

let { name: userName, ...rest } = { name: "æå››", age: 30, city: "åŒ—äº¬" };
console.log(userName, rest); // æå›› {age: 30, city: 'åŒ—äº¬'}

// åµŒå¥—è§£æ„
let [p, [q, r]] = [1, [2, 3]];
console.log(p, q, r); // 1 2 3

let {
    address: { city, street },
} = {
    name: "ç‹äº”",
    address: { city: "ä¸Šæµ·", street: "å—äº¬è·¯" },
};
console.log(city, street); // ä¸Šæµ· å—äº¬è·¯
```

## å…¶ä»–è¿ç®—ç¬¦

### 1. æ¡ä»¶ï¼ˆä¸‰å…ƒï¼‰è¿ç®—ç¬¦

```js
// åŸºæœ¬è¯­æ³•ï¼šcondition ? expr1 : expr2
let age = 18;
let status = age >= 18 ? "æˆå¹´" : "æœªæˆå¹´";
console.log(status); // æˆå¹´

// åµŒå¥—ä¸‰å…ƒè¿ç®—ç¬¦
let score = 85;
let grade = score >= 90 ? "A" : score >= 80 ? "B" : score >= 70 ? "C" : score >= 60 ? "D" : "F";
console.log(grade); // B

// ä½œä¸ºè¡¨è¾¾å¼
let x = 5,
    y = 10;
let max = x > y ? x : y;
console.log(max); // 10

// å‡½æ•°è¿”å›
function getFee(isMember) {
    return isMember ? "$2.00" : "$10.00";
}
console.log(getFee(true)); // $2.00

// æ³¨æ„ï¼šé¿å…è¿‡åº¦åµŒå¥—å½±å“å¯è¯»æ€§
```

### 2. é€—å·è¿ç®—ç¬¦

```js
// è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼
let x = (1, 2, 3, 4, 5);
console.log(x); // 5

// forå¾ªç¯ä¸­çš„å…¸å‹ç”¨æ³•
for (let i = 0, j = 10; i < j; i++, j--) {
    console.log(i, j);
}

// åŒæ—¶æ‰§è¡Œå¤šä¸ªæ“ä½œ
let a = 1,
    b = 2,
    c = 3;
let result = (a++, b++, c++);
console.log(result, a, b, c); // 3 2 3 4

// ç®€åŒ–ä»£ç ï¼ˆä½†å¯èƒ½é™ä½å¯è¯»æ€§ï¼‰
function process() {
    return console.log("å¤„ç†ä¸­"), fetch("/api/data"), console.log("å®Œæˆ");
}
```

### 3. typeof è¿ç®—ç¬¦

```js
console.log(typeof 42); // "number"
console.log(typeof "hello"); // "string"
console.log(typeof true); // "boolean"
console.log(typeof undefined); // "undefined"
console.log(typeof null); // "object"ï¼ˆå†å²é—ç•™é—®é¢˜ï¼‰
console.log(typeof {}); // "object"
console.log(typeof []); // "object"
console.log(typeof function () {}); // "function"
console.log(typeof Symbol()); // "symbol"
console.log(typeof 123n); // "bigint"

// æ£€æµ‹æ•°ç»„çš„æ›´å¥½æ–¹å¼
console.log(Array.isArray([])); // true
console.log([] instanceof Array); // true
console.log(Object.prototype.toString.call([])); // "[object Array]"
```

### 4. instanceof è¿ç®—ç¬¦

```js
// æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹
console.log([] instanceof Array); // true
console.log({} instanceof Object); // true
console.log(new Date() instanceof Date); // true
console.log(/regex/ instanceof RegExp); // true

// ç»§æ‰¿å…³ç³»
class Animal {}
class Dog extends Animal {}

const dog = new Dog();
console.log(dog instanceof Dog); // true
console.log(dog instanceof Animal); // true
console.log(dog instanceof Object); // true

// è¾¹ç•Œæƒ…å†µ
console.log("hello" instanceof String); // falseï¼ˆå­—é¢é‡ä¸æ˜¯å®ä¾‹ï¼‰
console.log(new String("hello") instanceof String); // true

console.log(null instanceof Object); // false
console.log(undefined instanceof Object); // false
```

### 5. in è¿ç®—ç¬¦

```js
// æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§
const car = { make: "Toyota", year: 2020 };
console.log("make" in car); // true
console.log("model" in car); // false

// æ£€æŸ¥æ•°ç»„ç´¢å¼•
const colors = ["red", "green", "blue"];
console.log(0 in colors); // true
console.log(3 in colors); // false

// æ£€æŸ¥åŸå‹é“¾ä¸Šçš„å±æ€§
console.log("toString" in {}); // trueï¼ˆæ¥è‡ªObject.prototypeï¼‰

// ä¸ hasOwnProperty çš„åŒºåˆ«
console.log("toString" in {}); // true
console.log({}.hasOwnProperty("toString")); // false

// æ£€æŸ¥ Map/Set çš„é”®ï¼ˆES2015+ï¼‰
const map = new Map([["a", 1]]);
console.log("a" in map); // falseï¼ˆinä¸é€‚ç”¨äºMapï¼‰
console.log(map.has("a")); // trueï¼ˆä½¿ç”¨hasæ–¹æ³•ï¼‰
```

### 6. delete è¿ç®—ç¬¦

```js
// åˆ é™¤å¯¹è±¡å±æ€§
const obj = { a: 1, b: 2, c: 3 };
console.log(delete obj.a); // true
console.log("a" in obj); // false

// ä¸èƒ½åˆ é™¤ç»§æ‰¿çš„å±æ€§
console.log(delete obj.toString); // trueï¼ˆä½†toStringä»ç„¶å­˜åœ¨ï¼‰
console.log("toString" in obj); // true

// åˆ é™¤æ•°ç»„å…ƒç´ ï¼ˆäº§ç”Ÿç¨€ç–æ•°ç»„ï¼‰
const arr = [1, 2, 3, 4];
console.log(delete arr[1]); // true
console.log(arr); // [1, empty, 3, 4]
console.log(arr.length); // 4ï¼ˆé•¿åº¦ä¸å˜ï¼‰

// ä¸èƒ½åˆ é™¤å˜é‡å£°æ˜
let x = 5;
console.log(delete x); // falseï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼‰

// å¯ä»¥åˆ é™¤å…¨å±€å¯¹è±¡çš„å±æ€§
globalVar = 10; // éšå¼å…¨å±€å˜é‡
console.log(delete globalVar); // true
```

## ES6+ æ–°å¢è¿ç®—ç¬¦

### 1. `**`æŒ‡æ•°è¿ç®—ç¬¦ ï¼ˆES2016ï¼‰

```js
// åŸºæœ¬ä½¿ç”¨
console.log(2 ** 3); // 8
console.log(10 ** -1); // 0.1
console.log(2 ** 0.5); // 1.4142135623730951

// å³ç»“åˆæ€§
console.log(2 ** (3 ** 2)); // 2 ** (3 ** 2) = 512
console.log((2 ** 3) ** 2); // 64

// ä¸ Math.pow ç­‰ä»·
console.log(2 ** 10 === Math.pow(2, 10)); // true

// å¤åˆèµ‹å€¼
let x = 3;
x **= 2; // x = x ** 2
console.log(x); // 9
```

### 2. å¯é€‰é“¾è¿ç®—ç¬¦ ?.ï¼ˆES2020ï¼‰

```js
const user = {
    name: "å¼ ä¸‰",
    address: {
        city: "åŒ—äº¬",
        street: null,
    },
};

// å®‰å…¨è®¿é—®åµŒå¥—å±æ€§
console.log(user?.name); // å¼ ä¸‰
console.log(user?.age); // undefinedï¼ˆä¸ä¼šæŠ¥é”™ï¼‰
console.log(user?.address?.city); // åŒ—äº¬
console.log(user?.address?.zipCode); // undefined

// æ•°ç»„å…ƒç´ è®¿é—®
const arr = null;
console.log(arr?.[0]); // undefined
console.log(arr?.[0]?.name); // undefined

// å‡½æ•°è°ƒç”¨
const obj = {
    method() {
        return "hello";
    },
};
console.log(obj.method?.()); // hello
console.log(obj.nonexistent?.()); // undefined

const func = null;
console.log(func?.()); // undefined

// ä¸ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ç»“åˆ
const city = user?.address?.city ?? "æœªçŸ¥";
console.log(city); // åŒ—äº¬

const zip = user?.address?.zipCode ?? "000000";
console.log(zip); // 000000
```

### 3. ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ ??ï¼ˆES2020ï¼‰

```js
// åªåœ¨å·¦ä¾§ä¸º null æˆ– undefined æ—¶è¿”å›å³ä¾§
console.log(null ?? "é»˜è®¤å€¼"); // é»˜è®¤å€¼
console.log(undefined ?? "é»˜è®¤å€¼"); // é»˜è®¤å€¼
console.log(0 ?? "é»˜è®¤å€¼"); // 0
console.log("" ?? "é»˜è®¤å€¼"); // ''
console.log(false ?? "é»˜è®¤å€¼"); // false
console.log(NaN ?? "é»˜è®¤å€¼"); // NaN

// ä¸é€»è¾‘æˆ–çš„åŒºåˆ«
console.log(0 || "é»˜è®¤å€¼"); // é»˜è®¤å€¼ï¼ˆå‡å€¼éƒ½è§¦å‘ï¼‰
console.log(0 ?? "é»˜è®¤å€¼"); // 0

console.log("" || "é»˜è®¤å€¼"); // é»˜è®¤å€¼
console.log("" ?? "é»˜è®¤å€¼"); // ''

// é“¾å¼ä½¿ç”¨
const config = {
    timeout: 0,
    retry: null,
};

const timeout = config.timeout ?? 3000; // 0
const retry = config.retry ?? 3; // 3
const host = config.host ?? "localhost"; // localhost

// æ³¨æ„ä¼˜å…ˆçº§
let x = null;
let y = 5;
let result = x ?? y; // 5

// ä¸èƒ½ä¸ && æˆ– || ç›´æ¥æ··ç”¨ï¼ˆéœ€è¦æ‹¬å·ï¼‰
// let z = a ?? b || c;                   // è¯­æ³•é”™è¯¯
let z = (a ?? b) || c; // æ­£ç¡®
```

### 4. BigInt è¿ç®—ç¬¦

```js
// BigInt å­—é¢é‡
const big = 1234567890123456789012345678901234567890n;

// ç®—æœ¯è¿ç®—
console.log(100n + 50n); // 150n
console.log(100n - 50n); // 50n
console.log(100n * 2n); // 200n
console.log(100n / 3n); // 33nï¼ˆæ•´é™¤ï¼‰
console.log(100n % 3n); // 1n
console.log(2n ** 10n); // 1024n

// æ¯”è¾ƒè¿ç®—
console.log(100n == 100); // trueï¼ˆæ¾æ•£ç›¸ç­‰ï¼‰
console.log(100n === 100); // falseï¼ˆä¸¥æ ¼ä¸ç›¸ç­‰ï¼‰
console.log(100n > 50); // true
console.log(100n < 150); // true

// ä¸èƒ½æ··åˆè¿ç®—
// console.log(100n + 50);                // TypeError
console.log(100n + BigInt(50)); // 150n

// ä½è¿ç®—ï¼ˆé™¤æ— ç¬¦å·å³ç§»ï¼‰
console.log(5n & 3n); // 1n
console.log(5n | 3n); // 7n
console.log(5n ^ 3n); // 6n
console.log(~5n); // -6n
console.log(5n << 1n); // 10n
console.log(5n >> 1n); // 2n
// console.log(5n >>> 1n);                // TypeErrorï¼ˆæ— ç¬¦å·å³ç§»ä¸æ”¯æŒï¼‰
```

## è¿ç®—ç¬¦çš„å®ç”¨æŠ€å·§

### 1. ç±»å‹è½¬æ¢æŠ€å·§

```js
// å¿«é€Ÿè½¬æ¢ä¸ºæ•°å­—
let str = "123";
let num = +str; // 123
let num2 = str * 1; // 123
let num3 = str - 0; // 123

// å¿«é€Ÿè½¬æ¢ä¸ºå¸ƒå°”å€¼
let value = "hello";
let bool = !!value; // true

// é»˜è®¤å€¼è®¾ç½®
let name = userInput || "é»˜è®¤åç§°"; // æ‰€æœ‰å‡å€¼éƒ½è§¦å‘
let name2 = userInput ?? "é»˜è®¤åç§°"; // åªå¯¹null/undefinedè§¦å‘

// äº¤æ¢å˜é‡å€¼
let a = 1,
    b = 2;
[a, b] = [b, a]; // ä½¿ç”¨è§£æ„
console.log(a, b); // 2 1
```

### 2. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

```js
// ä½¿ç”¨ä½è¿ç®—æ›¿ä»£éƒ¨åˆ†æ•°å­¦è¿ç®—
// åˆ¤æ–­å¥‡å¶æ€§
function isEven(n) {
    return (n & 1) === 0;
}

// å–æ•´
let float = 3.14;
console.log(float | 0); // 3ï¼ˆ32ä½æ•´æ•°ï¼‰
console.log(~~float); // 3ï¼ˆåŒæŒ‰ä½éï¼‰

// ä¹˜ä»¥2çš„å¹‚
console.log(5 << 2); // 20ï¼ˆ5 * 4ï¼‰

// é™¤ä»¥2çš„å¹‚ï¼ˆå‘ä¸‹å–æ•´ï¼‰
console.log(20 >> 2); // 5ï¼ˆ20 / 4ï¼‰

// ç¼“å­˜è®¡ç®—ç»“æœ
function expensiveOperation() {
    if (!expensiveOperation.cache) {
        expensiveOperation.cache = compute();
    }
    return expensiveOperation.cache;
}
```

### 3. è¡¨è¾¾å¼æ±‚å€¼é¡ºåº

```js
// ç†è§£æ±‚å€¼é¡ºåº
let x = 0;
let result = x++ + ++x * x-- - --x;
// åˆ†è§£ï¼š
// 1. x++: ä½¿ç”¨0ï¼Œxå˜ä¸º1
// 2. ++x: xå˜ä¸º2ï¼Œä½¿ç”¨2
// 3. x--: ä½¿ç”¨2ï¼Œxå˜ä¸º1
// 4. --x: xå˜ä¸º0ï¼Œä½¿ç”¨0
// è®¡ç®—ï¼š0 + 2 * 2 - 0 = 4
console.log(result, x); // 4 0

// çŸ­è·¯æ±‚å€¼çš„é¡ºåº
function a() {
    console.log("a");
    return false;
}
function b() {
    console.log("b");
    return true;
}
function c() {
    console.log("c");
    return true;
}

console.log((a() && b()) || c());
// è¾“å‡ºï¼ša â†’ c â†’ true
// è§£é‡Šï¼ša()è¿”å›falseï¼Œb()çŸ­è·¯ä¸æ‰§è¡Œï¼Œc()æ‰§è¡Œ

// é€—å·è¿ç®—ç¬¦çš„é¡ºåº
let y = (console.log("ç¬¬ä¸€"), console.log("ç¬¬äºŒ"), "ç»“æœ");
// è¾“å‡ºï¼šç¬¬ä¸€ ç¬¬äºŒ
console.log(y); // ç»“æœ
```

### 4. å¸¸è§é™·é˜±

```js
// 1. æµ®ç‚¹æ•°ç²¾åº¦
console.log(0.1 + 0.2 === 0.3); // false
console.log(0.1 + 0.2); // 0.30000000000000004

// è§£å†³æ–¹æ¡ˆ
console.log(Math.abs(0.1 + 0.2 - 0.3) < Number.EPSILON); // true

// 2. NaN æ¯”è¾ƒ
console.log(NaN === NaN); // false
console.log(Number.isNaN(NaN)); // trueï¼ˆæ­£ç¡®æ£€æŸ¥æ–¹å¼ï¼‰

// 3. ç±»å‹è½¬æ¢é™·é˜±
console.log([] == ![]); // true
console.log([] == 0); // true
console.log([] == ""); // true

// 4. é€’å¢/é€’å‡å‰¯ä½œç”¨
let arr = [1, 2, 3];
let i = 0;
console.log(arr[i++], i); // 1 1ï¼ˆåç½®é€’å¢å…ˆä½¿ç”¨åå¢åŠ ï¼‰
console.log(arr[++i], i); // 3 2ï¼ˆå‰ç½®é€’å¢å…ˆå¢åŠ åä½¿ç”¨ï¼‰
```
